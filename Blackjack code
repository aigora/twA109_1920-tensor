#include <stdio.h>
#include <stdlib.h>

typedef struct
{
  int numero;
  int palo;
  int mazo;
} Carta;

int main (void)
{
   Carta cartas[52];
   int indice,numero;
   int p, i;
   



  indice=0;
  for (p=0;p<3;p++)  // Este bucle recorre los cuatro palos de la baraja 0=Picas,1=diamantes.....
    for (numero=1;numero<=12;numero++) // Este bucle recorre cada carta del palo
    {
       cartas[indice].numero;
       cartas[indice].palo=p;
       cartas [indice].mazo=1;
    } 

}
    
int shuff(int cards[])
{
	int t;
	int i;
	int cartas[52];

    for (i=0;i<52;i++)
		cartas[i] = (i/13+3)*100 + i%13 + 1;

	srand(time(NULL));
	for (i=0;i<52;i++)
	{
		do
		{
		 t = rand() % 52;
		} while (cartas[t] == 0);
		cartas[i] = cartas[t];
		cartas[t] = 0;
	}
	
	return 0;
}
int conversor_de_jkq(int a)
{
	if ((a%100==11) ||(a%100==12) ||(a%100==13)) 
	  return (a/100)*100+10;
	else 
	  return a;
}

void elec(int num)
{
	char n;
	int numero;
	
	n = num / 100;
	numero = num % 100;
	switch (numero)
	{
		case 1: 
		{
			printf("*******\n");
			printf("*     *\n");
			printf("* %c   *\n", n);
			printf("*   A *\n");
			printf("*     *\n");
			printf("*******\n");
			break;
		}
		case 2:
		case 3:
		case 4:
		case 5:
		case 6:
		case 7:
		case 8:
		case 9:
		case 10:
		{
			printf("*******\n");
			printf("*     *\n");
			printf("* %c   *\n", n);
			printf("*  %2d *\n", numero);
			printf("*     *\n");
			printf("*******\n");
			break;
		}
		case 11:
		{
			printf("*******\n");
			printf("*     *\n");
			printf("* %c   *\n", numero);
			printf("*   J *\n");
			printf("*     *\n");
			printf("*******\n");
			break;
		}
		case 12:
		{
			printf("*******\n");
			printf("*     *\n");
			printf("* %c   *\n", n);
			printf("*   Q *\n");
			printf("*     *\n");
			printf("*******\n");
			break;
		}
		case 13:
		{
			printf("*******\n");
			printf("*     *\n");
			printf("* %c   *\n", n);
			printf("*   K *\n");
			printf("*     *\n");
			printf("*******\n");
			break;
		}

	}
}
int play(void)
{
	int i;
	int psum=0;
	int bsum=0;
	int pcards[5]={0};
	int bcards[5]={0};
	int cards[52];
	char go_on;
	char d;
	
	printf("Bienvenido al BlackJack.\n"
	"Pulsa Ctrl+C para salir.\n"
	"Pulsa enter para continuar\n");
	do{
		go_on = getchar();
	} while (go_on != '\n');
	printf("\n");
	shuff(cards);


	pcards[0]=cards[0];
	pcards[1]=cards[1];
	bcards[0]=cards[2];
	bcards[1]=cards[3];
	
	
	printf("Cartas del jugador:\n");
	pic(pcards[0]);
	pic(pcards[1]);

	
	i=0;
	for (i=0; i<2; i++)
	{
		if (pcards[i]%100 == 1)
		{
			printf("Escoge A valor de %d, escribes 'y' para 11 o 'n' para 1 :\n", i+1);
			do{
				d = getchar();
			} while (d!='y' && d!='n');
			
			if (d == 'y')
			{
				printf("Has escogido el valor 11 para la carta A.\n");
				psum = psum + 11;
			}
			else if(d == 'n')
			{
				printf("Has escogido el valor 1 para la carta A.\n");
				psum = psum +1;
			}
		}
		else if (convert_jkq(pcards[i]) %100 ==10) psum = psum + 10;
		else psum = psum + pcards[i]%100;
		
		if (psum > 21)
		{
			printf("Suma de las cartas del jugador:%d\n\n",psum);
			printf("GAME OVER!\n");
			return 1;
		}
		else if (psum == 21)
		{
			printf("Suma de las cartas del jugador:%d\n\n",psum);
			printf("TU GANAS!\n");
			return 0;
		}
	}
	printf("Suma de las cartas del jugador:%d\n\n",psum);
